apiVersion: cilium.io/v2
kind:       CiliumNetworkPolicy
metadata:
  name: l7
spec:
  endpointSelector:
    matchLabels:
      org:    g.o.t
      castle: castleblack
  ingress:
  - fromEndpoints:
    - matchLabels:
        clan: north
    toPorts:
    - ports:
      - port:     "4000"
        protocol: TCP
      rules:
        http:
        - method: GET
          path:   /v1/enter
  - fromEndpoints:
    - matchLabels:
        clan: nightking
    toPorts:
    - ports:
      - port:     "4000"
        protocol: TCP
      rules:
        http:
        - method: GET
          path:   /v1/melt